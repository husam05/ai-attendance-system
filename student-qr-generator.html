<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø±Ù…ÙˆØ² QR Ù„Ù„Ø·Ù„Ø§Ø¨ - Ù‚Ø³Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Tajawal', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .controls {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
            transition: all 0.3s;
            margin: 5px;
        }
        
        .btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-success {
            background: #48bb78;
        }
        
        .btn-success:hover {
            background: #38a169;
        }
        
        .students-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .student-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s;
            page-break-inside: avoid;
        }
        
        .student-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .student-number {
            background: #667eea;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .student-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 15px;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .qr-container {
            margin: 15px auto;
            padding: 15px;
            background: #f7fafc;
            border-radius: 10px;
            display: inline-block;
        }
        
        .student-id {
            color: #718096;
            font-size: 0.9rem;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
        }
        
        .download-btn {
            background: #48bb78;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
            font-size: 0.9rem;
            margin-top: 10px;
            transition: all 0.3s;
            width: 100%;
        }
        
        .download-btn:hover {
            background: #38a169;
            transform: translateY(-2px);
        }
        
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .controls {
                display: none;
            }
            
            .download-btn {
                display: none;
            }
            
            .students-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 15px;
            }
            
            .student-card {
                box-shadow: none;
                border: 1px solid #e2e8f0;
                break-inside: avoid;
            }
            
            .header {
                color: #2d3748;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ Ø±Ù…ÙˆØ² QR Ù„Ù„Ø·Ù„Ø§Ø¨</h1>
            <p>Ù‚Ø³Ù… Ø¹Ù„ÙˆÙ… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ - Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ù…ØµØ·ÙÙ‰</p>
        </div>
        
        <div class="controls">
            <button class="btn" onclick="generateAllQRCodes()">
                ğŸ”„ Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù…ÙŠØ¹ Ø±Ù…ÙˆØ² QR
            </button>
            <button class="btn btn-success" onclick="window.print()">
                ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø±Ù…ÙˆØ²
            </button>
            <button class="btn" onclick="downloadAllQRCodes()">
                ğŸ’¾ ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ù…ÙˆØ²
            </button>
        </div>
        
        <div class="students-grid" id="studentsGrid"></div>
    </div>

    <script>
        const students = [
            "ÙŠÙˆØ³Ù Ù…ÙŠØ«Ø§Ù‚ Ø·Ø§Ù„Ø¨ Ø¹Ø¬ÙŠÙ„",
            "Ø­Ø³ÙŠÙ† Ø¹Ù„ÙŠ Ø¯ÙˆØ´Ø§Ù† ÙƒØ§Ø¸Ù…",
            "Ù†ÙˆØ±Ø§Ù„Ø­Ø³Ù† Ø¨Ø§Ø³Ù… Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø²Ø§Ù‚ Ø­Ø³ÙŠÙ†",
            "Ù…ØµØ·ÙÙ‰ ÙØ¤Ø§Ø¯ ÙØ§Ø¶Ù„ Ø¹Ø¨Ø¯ Ø§Ù„Ø§Ù…ÙŠØ±",
            "Ø¹Ù„ÙŠ Ø¬Ù…Ø§Ù„ Ø®Ù„Ù ÙØ¹ÙŠÙ„",
            "Ù…ØµØ·ÙÙ‰ Ù…Ø­Ù…Ø¯ Ù…Ø±Ø¯Ø§Ù† Ø­Ø³Ù†",
            "Ø¶Ø­Ù‰ Ø­ÙŠØ¯Ø± ÙƒÙ…Ø§Ù„ Ø¬ÙˆØ¯Ù‡",
            "Ø¹Ù„ÙŠ Ù…Ø­Ù…Ø¯ Ø¬Ø¨Ø§Ø± Ø­Ø³ÙŠÙ†",
            "Ø¨Ù†ÙŠÙ† Ø¯ÙŠØ§Ø± Ø±Ø­ÙŠÙ… ØµÙØ±",
            "Ø²Ù‡Ø±Ø§Ø¡ Ù…Ø­Ù…Ø¯ Ø³Ø±ÙŠØ­ Ø¹Ø¨Ø¯ Ø§Ù„Ø­Ø³Ù†",
            "Ø²Ù‡Ø±Ø§Ø¡ Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ù…Ù‡Ø¯ÙŠ Ø®Ø¶ÙŠØ±",
            "Ù…Ù†ØªØ¸Ø± Ø­Ù…ÙŠØ¯ Ø¹Ø°Ø§Ø¨ Ø¶Ø§Ø­ÙŠ",
            "Ù†Ø¨Ø£ Ø¬Ø§Ø³Ù… Ø±Ø­Ù…Ù‡ Ø´Ø§ÙŠØ¹",
            "Ù…Ø¹ØµÙˆÙ…Ø© Ø¹Ø¨Ø¯ Ø§Ù„Ø­Ø³ÙŠÙ† Ø¬Ø¨Ø§Ø± Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡",
            "Ø¯Ø§Ù„ÙŠØ§ ÙƒØ±ÙŠÙ… Ù„ÙŠÙ„Ùˆ Ù…Ù†ØµÙˆØ±",
            "Ù…Ø¤Ù…Ù„ Ø³Ø¹Ø¯ÙˆÙ† Ø¬Ø¨Ø§Ø± Ù„ÙØªÙ‡",
            "Ø³Ø¨Ø£ Ù…Ø­Ù…Ø¯ ØµØ¨Ø±ÙŠ Ø³Ù„Ø·Ø§Ù†",
            "Ø±Ù‚ÙŠÙ‡ Ø§Ø«ÙŠØ± Ø§Ø­Ù…Ø¯ Ù…Ø·Ù„Ù‚"
        ];

        function generateStudentId(index, name) {
            const year = "2025";
            const dept = "AI";
            const num = String(index + 1).padStart(3, '0');
            return `${year}-${dept}-${num}`;
        }

        function createStudentCard(student, index) {
            const studentId = generateStudentId(index, student);
            
            const card = document.createElement('div');
            card.className = 'student-card';
            card.id = `student-${index}`;
            
            const qrData = JSON.stringify({
                id: studentId,
                name: student,
                department: "Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",
                university: "Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ù…ØµØ·ÙÙ‰"
            });
            
            card.innerHTML = `
                <div class="student-number">${index + 1}</div>
                <div class="student-name">${student}</div>
                <div class="qr-container" id="qr-${index}"></div>
                <div class="student-id">ID: ${studentId}</div>
                <button class="download-btn" onclick="downloadStudentQR(${index}, '${student.replace(/'/g, "\\'")}', '${studentId}')">ğŸ’¾ ØªØ­Ù…ÙŠÙ„ QR</button>
            `;
            
            return { card, qrData, qrId: `qr-${index}` };
        }

        function generateQRCodeImage(text, size = 150) {
            // Using Google Charts API to generate QR code
            const encodedText = encodeURIComponent(text);
            return `https://api.qrserver.com/v1/create-qr-code/?size=${size}x${size}&data=${encodedText}`;
        }
        
        function generateAllQRCodes() {
            const grid = document.getElementById('studentsGrid');
            grid.innerHTML = '';
            
            students.forEach((student, index) => {
                const { card, qrData, qrId } = createStudentCard(student, index);
                grid.appendChild(card);
                
                // Generate QR code image
                setTimeout(() => {
                    const qrContainer = document.getElementById(qrId);
                    if (!qrContainer) return;
                    
                    const qrImageUrl = generateQRCodeImage(qrData, 150);
                    const img = document.createElement('img');
                    img.src = qrImageUrl;
                    img.alt = `QR Code for ${student}`;
                    img.style.width = '150px';
                    img.style.height = '150px';
                    img.style.display = 'block';
                    
                    img.onerror = () => {
                        qrContainer.innerHTML = '<div style="color: red; padding: 10px; font-size: 0.8rem;">Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙˆÙ„ÙŠØ¯</div>';
                    };
                    
                    qrContainer.innerHTML = '';
                    qrContainer.appendChild(img);
                }, 50 * index);
            });
        }

        function downloadStudentQR(index, studentName, studentId) {
            const qrData = JSON.stringify({
                id: studentId,
                name: studentName,
                department: "Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",
                university: "Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ù…ØµØ·ÙÙ‰"
            });
            
            // Generate high-quality QR code (400x400)
            const qrImageUrl = generateQRCodeImage(qrData, 400);
            
            // Create canvas to add student name and info
            const canvas = document.createElement('canvas');
            canvas.width = 500;
            canvas.height = 600;
            const ctx = canvas.getContext('2d');
            
            // White background
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Load QR code image
            const img = new Image();
            img.crossOrigin = 'anonymous';
            img.onload = function() {
                // Draw QR code centered
                ctx.drawImage(img, 50, 80, 400, 400);
                
                // Add border around QR
                ctx.strokeStyle = '#667eea';
                ctx.lineWidth = 3;
                ctx.strokeRect(48, 78, 404, 404);
                
                // Add student name (top)
                ctx.fillStyle = '#2d3748';
                ctx.font = 'bold 24px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(studentName, canvas.width / 2, 50);
                
                // Add student ID (below QR)
                ctx.fillStyle = '#667eea';
                ctx.font = 'bold 20px Arial';
                ctx.fillText(studentId, canvas.width / 2, 520);
                
                // Add department (bottom)
                ctx.fillStyle = '#718096';
                ctx.font = '16px Arial';
                ctx.fillText('Ù‚Ø³Ù… Ø¹Ù„ÙˆÙ… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ', canvas.width / 2, 550);
                ctx.fillText('Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ù…ØµØ·ÙÙ‰', canvas.width / 2, 575);
                
                // Convert canvas to blob and download
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = `QR_${studentId}_${studentName}.png`;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(url);
                });
            };
            img.src = qrImageUrl;
        }
        
        function downloadAllQRCodes() {
            alert('Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ù…ÙˆØ²ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙˆØ­ÙØ¸Ù‡Ø§ ÙƒÙ…Ù„Ù PDF');
            window.print();
        }

        // Show loading message
        document.addEventListener('DOMContentLoaded', () => {
            const grid = document.getElementById('studentsGrid');
            grid.innerHTML = '<div style="padding: 40px; text-align: center; color: #667eea; font-size: 1.5rem;">â³ Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù…ÙˆØ² QR...</div>';
        });
        
        // Generate QR codes on page load
        window.addEventListener('load', () => {
            setTimeout(() => {
                generateAllQRCodes();
            }, 300);
        });
    </script>
</body>
</html>
